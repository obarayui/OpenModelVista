@startuml Eコマースシステム

' ============ 人物関連の階層 ============
abstract class 人物 {
  -氏名: 文字列
  -生年月日: 日付
  -メールアドレス: 文字列
  -電話番号: 文字列
  +情報を更新する()
}

abstract class ユーザー {
  -ユーザーID: 文字列
  -パスワード: 文字列
  -登録日: 日付
  -最終ログイン日時: 日時
  +ログインする()
  +ログアウトする()
  +パスワードを変更する()
}

class 顧客 {
  -顧客番号: 文字列
  -ポイント残高: 整数
  -会員ランク: 文字列
  +注文する()
  +レビューを書く()
  +ポイントを使用する()
}

class 従業員 {
  -従業員番号: 文字列
  -所属部署: 文字列
  -役職: 文字列
  +出勤する()
  +業務を処理する()
}

class 管理者 {
  -権限レベル: 整数
  +商品を管理する()
  +注文を管理する()
  +ユーザーを管理する()
  +レポートを生成する()
}

class 販売者 {
  -販売者ID: 文字列
  -店舗名: 文字列
  -評価: 小数
  +商品を登録する()
  +在庫を管理する()
  +売上を確認する()
}

' ============ 商品関連 ============
abstract class 商品 {
  -商品ID: 文字列
  -商品名: 文字列
  -説明: 文字列
  -価格: 小数
  -在庫数: 整数
  -販売状態: 文字列
  +在庫を更新する()
  +価格を変更する()
  +詳細を表示する()
}

class 電化製品 {
  -メーカー: 文字列
  -型番: 文字列
  -保証期間: 整数
  -消費電力: 小数
  +仕様を表示する()
}

class 衣料品 {
  -ブランド: 文字列
  -サイズ: 文字列
  -色: 文字列
  -素材: 文字列
  +サイズ表を表示する()
}

class 書籍 {
  -ISBN: 文字列
  -著者: 文字列
  -出版社: 文字列
  -ページ数: 整数
  +目次を表示する()
}

class 食品 {
  -賞味期限: 日付
  -原産地: 文字列
  -アレルギー情報: 文字列
  -保存方法: 文字列
  +栄養情報を表示する()
}

class 商品カテゴリ {
  -カテゴリID: 文字列
  -カテゴリ名: 文字列
  -親カテゴリID: 文字列
  +サブカテゴリを取得する()
}

class 商品レビュー {
  -レビューID: 文字列
  -評価: 整数
  -コメント: 文字列
  -投稿日時: 日時
  +役に立ったを追加する()
}

class 商品画像 {
  -画像ID: 文字列
  -画像URL: 文字列
  -表示順序: 整数
  -サムネイル: 文字列
}

' ============ 注文関連 ============
class 注文 {
  -注文番号: 文字列
  -注文日時: 日時
  -注文状態: 文字列
  -合計金額: 小数
  -配送先住所ID: 文字列
  +確定する()
  +キャンセルする()
  +状態を更新する()
}

class 注文明細 {
  -明細ID: 文字列
  -数量: 整数
  -単価: 小数
  -小計: 小数
  +小計を計算する()
}

class カート {
  -カートID: 文字列
  -作成日時: 日時
  -更新日時: 日時
  +商品を追加する()
  +商品を削除する()
  +合計を計算する()
  +クリアする()
}

class カート商品 {
  -数量: 整数
  -追加日時: 日時
  +数量を変更する()
}

class ウィッシュリスト {
  -リストID: 文字列
  -リスト名: 文字列
  -公開設定: 真偽値
  +商品を追加する()
  +商品を削除する()
  +カートに移動する()
}

class ウィッシュリスト商品 {
  -追加日時: 日時
  -優先度: 整数
}

' ============ 支払い関連 ============
abstract class 支払い {
  -支払いID: 文字列
  -支払い日時: 日時
  -金額: 小数
  -状態: 文字列
  +処理する()
  +キャンセルする()
  +返金する()
}

class クレジットカード支払い {
  -カード番号: 文字列
  -有効期限: 文字列
  -カード名義: 文字列
  -セキュリティコード: 文字列
  +認証する()
}

class 銀行振込支払い {
  -銀行名: 文字列
  -支店名: 文字列
  -口座番号: 文字列
  -振込人名: 文字列
  +振込情報を表示する()
}

class 電子マネー支払い {
  -ウォレットID: 文字列
  -残高: 小数
  -サービス名: 文字列
  +残高を確認する()
  +チャージする()
}

class 支払い方法 {
  -方法ID: 文字列
  -方法名: 文字列
  -手数料: 小数
  -有効フラグ: 真偽値
}

' ============ 配送関連 ============
class 配送 {
  -配送ID: 文字列
  -配送日時: 日時
  -配送状態: 文字列
  -追跡番号: 文字列
  +配送を開始する()
  +配送を完了する()
}

class 配送先住所 {
  -住所ID: 文字列
  -郵便番号: 文字列
  -都道府県: 文字列
  -市区町村: 文字列
  -番地: 文字列
  -建物名: 文字列
  -受取人名: 文字列
  -電話番号: 文字列
  +住所を検証する()
}

class 配送方法 {
  -方法ID: 文字列
  -配送業者: 文字列
  -配送料金: 小数
  -配達日数: 整数
}

class 配送業者 {
  -業者ID: 文字列
  -業者名: 文字列
  -連絡先: 文字列
  -対応地域: 文字列
}

class 追跡情報 {
  -追跡ID: 文字列
  -現在地: 文字列
  -更新日時: 日時
  -ステータス: 文字列
  +履歴を取得する()
}

' ============ その他 ============
class 請求書 {
  -請求書番号: 文字列
  -発行日: 日付
  -支払期限: 日付
  -合計金額: 小数
  -消費税: 小数
  +PDF生成する()
  +メール送信する()
}

class 割引 {
  -割引ID: 文字列
  -割引名: 文字列
  -割引率: 小数
  -割引額: 小数
  -開始日: 日付
  -終了日: 日付
  +適用する()
  +検証する()
}

class クーポン {
  -クーポンコード: 文字列
  -割引率: 小数
  -最低購入金額: 小数
  -使用回数: 整数
  -有効期限: 日付
  +使用する()
  +有効性を確認する()
}

class 通知 {
  -通知ID: 文字列
  -タイトル: 文字列
  -メッセージ: 文字列
  -通知日時: 日時
  -既読フラグ: 真偽値
  +送信する()
  +既読にする()
}

' ============ 継承関係 ============
人物 <|-- ユーザー
ユーザー <|-- 顧客
ユーザー <|-- 従業員
従業員 <|-- 管理者
ユーザー <|-- 販売者

商品 <|-- 電化製品
商品 <|-- 衣料品
商品 <|-- 書籍
商品 <|-- 食品

支払い <|-- クレジットカード支払い
支払い <|-- 銀行振込支払い
支払い <|-- 電子マネー支払い

' ============ 関連関係 ============
顧客 "1" -- "0..*" 注文
顧客 "1" -- "1" カート
顧客 "1" -- "0..*" ウィッシュリスト
顧客 "1" -- "0..*" 商品レビュー
顧客 "1" -- "0..*" 配送先住所

販売者 "1" -- "0..*" 商品

商品 "1" -- "0..*" 商品画像
商品 "1" -- "0..*" 商品レビュー
商品 "0..*" -- "1" 商品カテゴリ

注文 "1" -- "1..*" 注文明細
注文 "1" -- "1" 支払い
注文 "1" -- "1" 配送
注文 "1" -- "1" 請求書
注文 "0..1" -- "0..1" 割引
注文 "0..1" -- "0..1" クーポン

注文明細 "0..*" -- "1" 商品

カート "1" -- "0..*" カート商品
カート商品 "0..*" -- "1" 商品

ウィッシュリスト "1" -- "0..*" ウィッシュリスト商品
ウィッシュリスト商品 "0..*" -- "1" 商品

支払い "0..*" -- "1" 支払い方法

配送 "1" -- "1" 配送先住所
配送 "0..*" -- "1" 配送方法
配送 "1" -- "0..*" 追跡情報
配送方法 "0..*" -- "1" 配送業者

顧客 "1" -- "0..*" 通知

@enduml
