@startuml 抽象構文木ノード

' 抽象基底クラス
abstract class ASTノード {
  -位置: 位置情報
  -型: 型情報
  +accept(訪問者: 訪問者)
  +子ノードを取得する()
}

' 式の抽象クラス
abstract class 式 {
  +評価する()
}

' リテラル式
abstract class リテラル式 {
  -値: Object
}

class 数値リテラル {
  -値: number
}

class 文字列リテラル {
  -値: string
}

class 真偽値リテラル {
  -値: boolean
}

class Nullリテラル {
}

' その他の式
class 識別子式 {
  -名前: string
}

class 二項演算式 {
  -演算子: string
  -左辺: 式
  -右辺: 式
}

class 単項演算式 {
  -演算子: string
  -オペランド: 式
}

class 関数呼び出し式 {
  -関数: 式
  -引数リスト: 式[]
}

class 配列アクセス式 {
  -配列: 式
  -添字: 式
}

class 代入式 {
  -左辺: 式
  -右辺: 式
}

' 文の抽象クラス
abstract class 文 {
  +実行する()
}

class 変数宣言文 {
  -名前: string
  -型: 型情報
  -初期化式: 式
}

class 関数宣言文 {
  -名前: string
  -パラメータリスト: パラメータ[]
  -戻り値型: 型情報
  -本体: ブロック文
}

class If文 {
  -条件: 式
  -Then節: 文
  -Else節: 文
}

class While文 {
  -条件: 式
  -本体: 文
}

class For文 {
  -初期化: 文
  -条件: 式
  -更新: 式
  -本体: 文
}

class Return文 {
  -戻り値: 式
}

class 式文 {
  -式: 式
}

class ブロック文 {
  -文リスト: 文[]
}

' その他のノード
class パラメータ {
  -名前: string
  -型: 型情報
}

class プログラム {
  -文リスト: 文[]
}

' 継承関係
ASTノード <|-- 式
ASTノード <|-- 文
ASTノード <|-- パラメータ
ASTノード <|-- プログラム

式 <|-- リテラル式
式 <|-- 識別子式
式 <|-- 二項演算式
式 <|-- 単項演算式
式 <|-- 関数呼び出し式
式 <|-- 配列アクセス式
式 <|-- 代入式

リテラル式 <|-- 数値リテラル
リテラル式 <|-- 文字列リテラル
リテラル式 <|-- 真偽値リテラル
リテラル式 <|-- Nullリテラル

文 <|-- 変数宣言文
文 <|-- 関数宣言文
文 <|-- If文
文 <|-- While文
文 <|-- For文
文 <|-- Return文
文 <|-- 式文
文 <|-- ブロック文

' 関連
二項演算式 o-- "2" 式
単項演算式 o-- "1" 式
関数呼び出し式 o-- "1" 式
関数呼び出し式 o-- "*" 式 : 引数
配列アクセス式 o-- "2" 式
代入式 o-- "2" 式

変数宣言文 o-- "0..1" 式
関数宣言文 o-- "*" パラメータ
関数宣言文 o-- "1" ブロック文
If文 o-- "1" 式
If文 o-- "1..2" 文
While文 o-- "1" 式
While文 o-- "1" 文
For文 o-- "1" 文 : 初期化
For文 o-- "1" 式 : 条件
For文 o-- "1" 式 : 更新
For文 o-- "1" 文 : 本体
Return文 o-- "0..1" 式
式文 o-- "1" 式
ブロック文 o-- "*" 文

プログラム o-- "*" 文

@enduml
