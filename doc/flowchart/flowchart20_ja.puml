@startuml
title 在庫発注システムフローチャート

start
:システム起動;
:在庫データベースに接続;
:商品リストを取得;
:カウンター i = 0 に初期化;

while (i < 商品数?) is (はい)
  :商品[i]の現在庫数を取得;
  :商品[i]の安全在庫数を取得;
  
  if (現在庫数 < 安全在庫数?) then (はい)
    :不足数を計算;
    :発注推奨数を計算;
    note right
      発注推奨数 = 
      (最大在庫数 - 現在庫数)
    end note
    
    if (発注推奨数 > 最小発注単位?) then (はい)
      :発注データを作成;
      :発注リストに追加;
      :アラート通知を生成;
    else (いいえ)
      :最小発注単位で発注データを作成;
      :発注リストに追加;
    endif
    
  else (いいえ)
    :在庫充足としてログに記録;
  endif
  
  :i = i + 1;
endwhile (いいえ)

:発注リストを出力;
:管理者に通知メールを送信;
:処理完了ログを記録;
stop

@enduml
